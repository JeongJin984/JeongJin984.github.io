---
title: SIY Spring Cloud Eureka
author: Jiny
date: 2021-06-06 16:30:00 +0800
categories: [Spring, Cloud]
tags: [spring, cloud, msa, eureka, siy]
toc: false
---
 
# Eureka
___

## π’Ώ **Eureka**

μ λ μΉ΄λ” ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ΅ λ‚λ‰μ–΄μ € μλ‹¤.

- μ λ μΉ΄ μ„λ²„
  - λ¨λ“  λ§μ΄ν¬λ΅ μ„λΉ„μ¤κ°€ μμ‹ μ κ°€μ©μ„±μ„ λ“±λ΅ν•λ” λ μ§€μ¤νΈλ¦¬
  - λ“±λ΅λλ” μ •λ³΄λ” μ„λΉ„μ¤ ID μ™€ URLμ΄ ν¬ν•¨λλ”λ° μ λ μΉ΄ ν΄λΌμ΄μ–ΈνΈλ¥Ό ν†µν•΄μ„ μ΄ μ •λ³΄λ¥Ό μ„λ²„μ— λ“±λ΅
  - λ“±λ΅λ μ •λ³΄λ¥Ό ν†µν•΄μ„ μ„λΉ„μ¤μ λ™μ  λ°κ²¬μ΄ κ°€λ¥
- μ λ μΉ΄ ν΄λΌμ΄μ–ΈνΈ
  - λ“±λ΅λ λ§μ΄ν¬λ΅ μ„λΉ„μ¤λ¥Ό νΈμ¶ν•΄μ„ μ‚¬μ©ν•  μ λ μΉ΄ ν΄λΌμ΄μ–ΈνΈλ¥Ό λ°κ²¬(gateway)
  - μ λ μΉ΄ μ„λ²„λ” λ™μ‹μ— μ λ μΉ΄ ν΄λΌμ΄μ–ΈνΈμ΄κΈ°λ„ ν•΄μ„ λ‹¤λ¥Έ μ λ μΉ΄ μ„λ²„μ™€ μƒνƒλ¥Ό λ™κΈ°ν™” ν•¨
  - μ—¬λ¬λ€μ μ λ μΉ΄ μ„λ²„λ¥Ό μ΄μμ‹ κ³ κ°€μ©μ„±

![image](https://media.vlpt.us/post-images/tedigom/b6bae160-fb10-11e9-9ef4-395edd3ef4d0/%EA%B0%80%ED%8A%B8%EB%84%88MSAComponent.png)
_Service Discovery: Eureka Server / Service Router: Api Gateway_

___

## π’Ώ **Eureka κµ¬μ¶•**

### **Eureka Server**

**μ£Όμ” Component**

- @EnableEurekaServer(main ν΄λμ¤): μ— λ¶™μ΄λ©° μ λ μΉ΄ μ„λ²„λ¥Ό μ“°κ² λ‹¤λ” λ»
  - μ—¬κΈ° μ„λ²„μ indexλ¥Ό νΈμ¶ν•λ©΄ ν„μ¬ κ°€μ© μƒνƒμ μ„λ²„λ¥Ό λ³Ό μ μμ
- register-with-eureka(yml)
  - λ μ§€μ¤νΈλ¦¬μ— μμ‹ μ„ λ“±λ΅ν• μ§€ μ—¬λ¶€
  - ν΄λ¬μ¤ν„°λ§ λ¨λ“μ μ λ μΉ΄ μ„λ²„ κµ¬μ„±μ€ μ„λ΅ peering κµ¬μ„±μ΄ κ°€λ¥. (μ λ μΉ΄ μ„λ²„ μ„¤μ •μ— μ •μλ peering λ…Έλ“λ¥Ό μ°Ύμ•„μ„ λ μ§€μ¤νΈλ¦¬ μ •λ³΄μ syncλ¥Ό λ§μ¶¤)
- fetch-registry(yml)
  - λ μ§€μ¤νΈλ¦¬μ— μλ” μ •λ³΄λ¥Ό κ°€μ Έμ¬ μ§€μ— λ€ν• μ—¬λ¶€
- wait-time-in-ms-when-sync-empty
  - registryλ¥Ό κ°±μ‹ ν•  μ μ—†μ„λ• μ¬μ‹λ„λ¥Ό κΈ°λ‹¤λ¦¬λ” μ‹κ°„
  - ν…μ¤νΈ μ‹ μ§§μ€ μ‹κ°„μΌλ΅ λ“±λ΅ν•΄λ†“μΌλ©΄ μ λ μΉ΄ μ„λΉ„μ¤μ μ‹μ‘ μ‹κ°„κ³Ό λ“±λ΅λ μ„λΉ„μ¤λ¥Ό λ³΄μ—¬μ£Όλ” μ‹κ°„ λ‹¨μ¶• κ°€λ¥
  - μ λ μΉ΄λ” λ“±λ΅λ μ„λΉ„μ¤μ—μ„ 10μ΄ κ°„κ²©μΌλ΅ μ—°μ† 3νμ μƒνƒ μ •λ³΄(heartbeat)λ¥Ό λ°›μ•„μ•Ό ν•λ―€λ΅ λ“±λ΅λ κ°λ³„ μ„λΉ„μ¤λ¥Ό λ³΄μ—¬μ£Όλ”λ° 30μ΄ μ†μ”

**μ£Όμ μ‚¬ν•­**

- μ λ μΉ΄ ν΄λΌμ΄μ–ΈνΈλ¥Ό 1κ° κµ¬μ„±ν•  λ•λ” register-with-eureka, fetch-registry λ‘λ‹¤ false
- 