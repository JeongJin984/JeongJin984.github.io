---
title: Kafka Api
author: Jiny
date: 2021-06-08 14:30:00 +0800
categories: [DataEngineering, Kafka]
tags: [kafka, data]
toc: false
---
 
# Kafka API

___

## ğŸ’¿ **Kafka API**

![image](https://miro.medium.com/max/3720/1*5DMYoWniIyN7YRoJof4K_w.png)

### **Kafka API**

- **Kafka Producer API:** directly producing data
- **Kafka Connect Source API:** bridging between a datastores we don't control and kafka
- **KafkaStreams API/KSQL:** App wanting to consume from Kafka and produce back into Kafka, also called stream processing
  - Use KSQL can write your real time job as SQL-like
- **Kafka Consumer API:** Read a stream and perfrom real-time action on it
- **Kafka Connect Sink API:** Read a stream and store it into a target store
  - Kafa to S3, Kafka to HDFS, KafKa to (R)DBMS

### **ë¶„ë¥˜**

ìœ„ì˜ ê²ƒë“¤ì„ í¬ê²Œ ë‚˜ëˆ„ìë©´ 3ê°€ì§€ ì´ë‹¤.

- Conntector ê³„ì—´: ë¶„ì‚° ì»¤ë„¥íŠ¸ë¥¼ êµ¬ì¶•í•´ì•¼í•¨
  - Source & Sink API
  - connect-api ì‚¬ìš©
- Producer / Consumer ê³„ì—´: ì¸í”„ë¼(ë¶„ì‚° ì»¤ë„¥íŠ¸) êµ¬ì¶• X
  - Producer & Consumer API
  - kafka-client ì‚¬ìš©
  - spring kafka(ì–´ë“œë¯¼, ì»¨ìŠˆë¨¸, í”„ë¡œë“€ì„œ, ìŠ¤íŠ¸ë¦¼ì¦ˆ ì œê³µ)
- Stream ê³„ì—´
  - Kfka Streams

___

## ğŸ’¿ **Kafka Connector**

> íŠ¹ì •í•œ ì‘ì—… í˜•íƒœë¥¼ í…œí”Œë¦¿ìœ¼ë¡œ ë§Œë“¤ì–´ ë†“ì€ ì»¤ë„¥í„°ë¥¼ ì‹¤í–‰í•¨ìœ¼ë¡œì„œ ë°˜ë³µ ì‘ì—…ì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤.

### **ë¶„ë¥˜**

- **ì†ŒìŠ¤ ì»¤ë„¥í„°:** ë°ì´í„°ë¥¼ í† í”½ìœ¼ë¡œ ì „ì†¡(í”„ë¡œë“€ì„œ ì—­í• )
- **ì‹±í¬ ì»¤ë„¥í„°:** í† í”½ì˜ ë°ì´í„°ë¥¼ ë‹¤ë¥¸ ì €ì¥ì†Œì— ì €ì¥(ì»¨ìŠˆë¨¸ ì—­í• )

### **êµ¬ì„±**

![image](https://docs.confluent.io/platform/current/_images/connector-model.png)

- ì‚¬ìš©ìê°€ ì»¤ë„¥íŠ¸ì— ì»¤ë„¥í„° ìƒì„± ëª…ë ¹ì„ ë‚´ë¦¬ë©´ ì»¤ë„¥íŠ¸ëŠ” ë‚´ë¶€ì— ì»¤ë„¥í„°ì™€ íƒœìŠ¤í¬ë¥¼ ìƒì„±
  - ë³´í†µ TaskëŠ” ì‹¤ì§ˆì ì¸ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê¸° ë•Œë¬¸ì— Customí•˜ì—¬ ì‚¬ìš©
- ì»¤ë„¥í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ íŒŒì´í”„ë¼ì¸ì„ ìƒì„±í•  ë•Œ converter ì™€ Trasform ê¸°ëŠ¥ì„ ì˜µì…˜ìœ¼ë¡œ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.
  - ì»¨ë²„í„°: ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê¸° ì „ì— ìŠ¤í‚¤ë§ˆë¥¼ ë³€ê²½í•˜ë„ë¡ ë„ì™€ì¤€ë‹¤.
    - JsonConverter, StringConverter, ByteConverterë¥¼ ì§€ì›
    - ì•„ë‹ˆë©´ ì§ì ‘ CustomConverë¥¼ ì‘ì„± ê°€ëŠ¥
  - Tramsform: ë°ì´í„° ì²˜ë¦¬ ì‹œ ê° ë©”ì‹œì§€ ë‹¨ìœ„ë¡œ ë°ì´í„°ë¥¼ ê°„ë‹¨í•˜ê²Œ ë³€í™˜í•˜ê¸° ìœ„í•œ ìš©ë„
    - Json ë°ì´í„°ë¥¼ ì»¤ë„¥í„°ì—ì„œ ì‚¬ìš©í• ë•Œ íŠ¹ì • í‚¤ë¥¼ ì‚­ì œí•˜ê±°ë‚˜ ì¶”ê°€ ê°€ëŠ¥
    - Cast, Drop, ExtractField ë“±ì´ ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µ

___

## ğŸ’¿ **Kafka Connector ì‹¤í–‰**

### **ë‹¨ì¼ ëª¨ë“œ**

> í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ì— 1í•˜ë‚˜ì˜ ì»¤ë„¥íŠ¸ê°€ ì‹¤í–‰ë˜ì–´ ê·¸ë£¹ì˜ ê°œë… ì—†ì´ í˜¼ì ëª¨ë“  ë°ì´í„°ë¥¼ ì²˜ë¦¬

### **ë¶„ì‚° ëª¨ë“œ**

> 2ê°œ ì´ìƒì˜ í”„ë¡œì„¸ìŠ¤ê°€ 1ê°œì˜ ê·¸ë£¹ìœ¼ë¡œ ë¬¶ì—¬ì„œ ìš´ì˜

- 1ê°œì˜ ì»¤ë„¥íŠ¸ í”„ë¡œì„¸ìŠ¤ì— ì´ìŠˆê°€ ë°œìƒí•˜ì—¬ ì¢…ë£Œë˜ë”ë¼ë„ ì‚´ì•„ìˆëŠ” ë‚˜ë¨¸ì§€ 1ê°œ ì»¤ë„¥íŠ¸ í”„ë¡œì„¸ìŠ¤ê°€ ì»¤ë„¥í„°ë¥¼ ì´ì–´ë°›ì•„ì„œ íŒŒì´í”„ë¼ì¸ì„ ì§€ì†ì ìœ¼ë¡œ ì‹¤í–‰

__ 

## ğŸ’¿ **ì¥ì  ê³¼ ë‹¨ì **

### **Kafka Producer(Consumer) API**

- ì¥ì 
  - Extremely simple to use
  - multithreadë¡œ êµ¬ì„± ê°€ëŠ¥
  - ë¶„ì‚° ì»¤ë„¥íŠ¸ êµ¬ì¶• í•„ìš” ì—†ìŒ
  - perfectly suited for applications directly emitting stream of data such as logs, clickstreams, IOT
- ë‹¨ì 
  - Producer API can be extended and built upon to do a lot more thing
  - this will requre engineers to write a lot of added logic
  - How to track the source offset(how to resume if stopped)
  - How to distribute the load for your ETL(converter, transformer) across many producers

### **Connect Source(Sink) Connect API**

- ì¥ì 
  - built so that developers would get a nicer API made for
    - producer tasks distribution for parallel processing
    - easy mechanism to resume your producers
    - íƒœìŠ¤í¬ ë§ˆë‹¤ ë‹¤ë¥´ config ê°€ëŠ¥
  - bustiling variety of available connectors
- ë‹¨ì 
  - ë¶„ì‚° ì»¤ë„¥íŠ¸ë¥¼ ì§ì ‘ êµ¬ì„±í•´ì•¼ í•¨
  - ë‹¨ì ì„ ì˜ ëª¨ë¥´ê² ìŒ




